import{a as n,b as i}from"../chunk-6H2JHQVY.js";import{a as t}from"../chunk-P37U34EQ.js";i(!1);var a=qs("form"),c=qs("#error-message");function s(){let e=new URLSearchParams(window.location.search).get("next")||"page/upload";window.location.href=window.location.origin+("/"+e).replace("//","/")}t(s,"next");n.token?confirm("You are already logged in. Do you want to stay logged in?")&&s():(qs("nav").style.opacity="0",qs("nav ul").style.pointerEvents="none");a.on("submit",async o=>{o.preventDefault();let e=new FormData(a),r=await(await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(e))})).json();r.err?c.innerHTML=r.msg:(localStorage.setItem("tokenExpiresAt",r.expiresAt),s())});
//# sourceMappingURL=login.js.map
