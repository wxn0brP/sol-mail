{
  "version": 3,
  "sources": ["../../src/pages/upload.ts"],
  "sourcesContent": ["import \"../utils/requireLogin\";\nimport { checkTokenRefresh } from \"../utils/tokenRefresh\";\nimport \"./upload.scss\";\n\ncheckTokenRefresh();\nconst uploadForm = qs(\"form\");\n\nconst fileInput = qi(\"#filefield\");\nconst mailNameInput = qi(\"#mailName\");\nconst bodyInput = qi(\"#body\");\nconst message = qs(\"#message\");\n\nuploadForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const mailName = mailNameInput.value.trim();\n    if (!mailName) {\n        message.textContent = \"Please enter a mail name\";\n        return;\n    }\n    const body = bodyInput.value.trim();\n\n    if (fileInput.files.length === 0) {\n        const conf = confirm(\"Are you sure you want to upload an empty file?\");\n        if (!conf) return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"mailName\", mailName);\n    if (body)\n        formData.append(\"body\", body);\n\n    for (const file of fileInput.files) {\n        formData.append(\"filefield\", file);\n    }\n\n    const res = await fetch(`/api/files/${encodeURIComponent(mailName)}`, {\n        method: \"POST\",\n        body: formData\n    }).then(res => res.json());\n\n    if (res.err) {\n        message.innerHTML = res.msg;\n    } else {\n        message.innerHTML = \"Upload finished.\";\n        mailNameInput.value = \"\";\n        fileInput.value = \"\";\n    }\n});"],
  "mappings": "mGAIAA,EAAkB,EAClB,IAAMC,EAAa,GAAG,MAAM,EAEtBC,EAAY,GAAG,YAAY,EAC3BC,EAAgB,GAAG,WAAW,EAC9BC,EAAY,GAAG,OAAO,EACtBC,EAAU,GAAG,UAAU,EAE7BJ,EAAW,iBAAiB,SAAU,MAAOK,GAAU,CACnDA,EAAM,eAAe,EAErB,IAAMC,EAAWJ,EAAc,MAAM,KAAK,EAC1C,GAAI,CAACI,EAAU,CACXF,EAAQ,YAAc,2BACtB,MACJ,CACA,IAAMG,EAAOJ,EAAU,MAAM,KAAK,EAElC,GAAIF,EAAU,MAAM,SAAW,GAEvB,CADS,QAAQ,gDAAgD,EAC1D,OAGf,IAAMO,EAAW,IAAI,SACrBA,EAAS,OAAO,WAAYF,CAAQ,EAChCC,GACAC,EAAS,OAAO,OAAQD,CAAI,EAEhC,QAAWE,KAAQR,EAAU,MACzBO,EAAS,OAAO,YAAaC,CAAI,EAGrC,IAAMC,EAAM,MAAM,MAAM,cAAc,mBAAmBJ,CAAQ,CAAC,GAAI,CAClE,OAAQ,OACR,KAAME,CACV,CAAC,EAAE,KAAKE,GAAOA,EAAI,KAAK,CAAC,EAErBA,EAAI,IACJN,EAAQ,UAAYM,EAAI,KAExBN,EAAQ,UAAY,mBACpBF,EAAc,MAAQ,GACtBD,EAAU,MAAQ,GAE1B,CAAC",
  "names": ["checkTokenRefresh", "uploadForm", "fileInput", "mailNameInput", "bodyInput", "message", "event", "mailName", "body", "formData", "file", "res"]
}
